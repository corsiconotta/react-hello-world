<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Learning Tool</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: linear-gradient(to bottom right, #e0f2fe, #e0e7ff); }
        .container { max-width: 600px; margin: 2rem auto; background: white; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); padding: 2rem; }
        h1 { color: #1e40af; margin-bottom: 1rem; }
        form { display: flex; gap: 1rem; margin-bottom: 1rem; }
        input { flex: 1; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 4px; }
        button { background: #3b82f6; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2563eb; }
        .word-list { display: flex; flex-direction: column; gap: 1rem; }
        .word-item { display: flex; justify-content: space-between; align-items: center; background: #f3f4f6; padding: 1rem; border-radius: 4px; }
        .word-text span { margin-right: 0.5rem; }
        .word-actions button { background: none; color: #3b82f6; padding: 0.25rem; }
        .word-actions button:hover { color: #2563eb; }
        .clear-button { margin-top: 1rem; }
        .quiz-container { margin-top: 1rem; }
        .quiz-question { margin-bottom: 1rem; }
        .result { font-weight: bold; margin-top: 1rem; }
    </style>
    <script src="https://unpkg.com/react@17/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>
</head>
<body>
    <div id="root">
        <h1>If you see this, React isn't working!</h1>
    </div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            const [words, setWords] = useState([]);
            const [englishWord, setEnglishWord] = useState('');
            const [romanianWord, setRomanianWord] = useState('');
            const [quizActive, setQuizActive] = useState(false);
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [score, setScore] = useState(0);
            const [quizResults, setQuizResults] = useState([]);
            const [quizOptions, setQuizOptions] = useState([]);

            useEffect(() => {
                const savedWords = localStorage.getItem('words');
                if (savedWords) {
                    setWords(JSON.parse(savedWords));
                }
            }, []);

            useEffect(() => {
                localStorage.setItem('words', JSON.stringify(words));
            }, [words]);

            const addWord = (e) => {
                e.preventDefault();
                if (!englishWord || !romanianWord) {
                    alert("Both fields are required!");
                    return;
                }
                setWords([...words, { english: englishWord, romanian: romanianWord }]);
                setEnglishWord('');
                setRomanianWord('');
            };

            const clearWords = () => {
                setWords([]);
            };

            const speakWord = (word, lang) => {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = lang === 'english' ? 'en-US' : 'ro-RO';
                speechSynthesis.speak(utterance);
            };

            const startQuiz = () => {
                setQuizActive(true);
                setCurrentQuestion(0);
                setScore(0);
                generateQuizOptions();
            };

            const generateQuizOptions = () => {
                if (words.length > 0) {
                    const currentWord = words[currentQuestion].english;
                    const options = [currentWord];

                    while (options.length < 4) {
                        const randomWord = words[Math.floor(Math.random() * words.length)].english;
                        if (!options.includes(randomWord)) {
                            options.push(randomWord);
                        }
                    }
                    setQuizOptions(options.sort(() => Math.random() - 0.5));
                }
            };

            const handleAnswer = (answer) => {
                const correctAnswer = words[currentQuestion].english;
                if (answer === correctAnswer) {
                    setScore(score + 1);
                    setQuizResults([...quizResults, { question: correctAnswer, correct: true }]);
                } else {
                    setQuizResults([...quizResults, { question: correctAnswer, correct: false }]);
                }

                if (currentQuestion < words.length - 1) {
                    setCurrentQuestion(currentQuestion + 1);
                    generateQuizOptions();
                } else {
                    setQuizActive(false);
                }
            };

            return (
                <div className="container">
                    <h1>English Learning Tool</h1>
                    <form onSubmit={addWord}>
                        <input
                            type="text"
                            value={englishWord}
                            onChange={(e) => setEnglishWord(e.target.value)}
                            placeholder="English word"
                        />
                        <input
                            type="text"
                            value={romanianWord}
                            onChange={(e) => setRomanianWord(e.target.value)}
                            placeholder="Romanian word"
                        />
                        <button type="submit">Add</button>
                    </form>
                    <div className="word-list">
                        {words.map((word, index) => (
                            <div key={index} className="word-item">
                                <div className="word-text">
                                    <span><strong>{word.english}</strong></span>
                                    <span>-</span>
                                    <span>{word.romanian}</span>
                                </div>
                                <div className="word-actions">
                                    <button onClick={() => speakWord(word.english, 'english')}>ðŸ”Š EN</button>
                                    <button onClick={() => speakWord(word.romanian, 'romanian')}>ðŸ”Š RO</button>
                                </div>
                            </div>
                        ))}
                    </div>
                    <button className="clear-button" onClick={clearWords}>Clear All Words</button>
                    
                    {/* Quiz Section */}
                    <button onClick={startQuiz}>Start Quiz</button>
                    {quizActive && (
                        <div className="quiz-container">
                            <div className="quiz-question">
                                <strong>Question {currentQuestion + 1}:</strong> What is the English word for "{words[currentQuestion] && words[currentQuestion].romanian}"?
                            </div>
                            {quizOptions.map((option, index) => (
                                <button key={index} onClick={() => handleAnswer(option)}>{option}</button>
                            ))}
                        </div>
                    )}
                    {!quizActive && quizResults.length > 0 && (
                        <div className="result">
                            <h2>Quiz Finished!</h2>
                            <p>Your Score: {score} out of {words.length}</p>
                            <p>Correct Answers: {quizResults.filter(result => result.correct).length}</p>
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(
            <React.StrictMode>
                <App />
            </React.StrictMode>,
            document.getElementById('root')
        );
    </script>
</body>
</html>
